<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.82.0" />


<title>Functional Programming with Strava Data - A Hugo website</title>
<meta property="og:title" content="Functional Programming with Strava Data - A Hugo website">


  <link href='/favicon.ico' rel='icon' type='image/x-icon'/>



  








<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="https://github.com/rstudio/blogdown">GitHub</a></li>
    
    <li><a href="https://twitter.com/rstudio">Twitter</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">3 min read</span>
    

    <h1 class="article-title">Functional Programming with Strava Data</h1>

    
    <span class="article-date">2021-04-16</span>
    

    <div class="article-content">
      


<p>Strava (<a href="http://labs.strava.com" class="uri">http://labs.strava.com</a>) is a data rich platform to collect, store, and use physical activity data. One key challenge faced by many sporting enthusiasts is how to effectively take control of their own data to make novel and interesting visualizations or depictions of one’s hard work. In some senses, Strava makes this easy by packing your data for you with options on how you wish to view your achievements. For the DIY’er, the story is a little more complicated. As we’ve outlined above with the reading in of your personal Strava data, there is a consistent theme of following key steps to have our data ready for your most creative projects.</p>
<p>The following code chunk takes data from the prior API calls and tidy’s a dataframe for use. There are a few functions embedded that whittle down the incoming data to it’s most essential features and also excludes activities that you don’t do very often (e.g., that one time you went stand up paddle boarding and recorded it on Strava).</p>
<pre class="r"><code>#reading in data for sandbox
# Will be deleted for final project
strav_data &lt;- read_csv(here(&quot;content/post/2021-04-16-functional-programming-with-strava-data/data&quot;, &quot;strav_csv.csv&quot;))</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   commute = col_logical(),
##   display_hide_heartrate_option = col_logical(),
##   external_id = col_character(),
##   flagged = col_logical(),
##   from_accepted_tag = col_logical(),
##   has_heartrate = col_logical(),
##   has_kudoed = col_logical(),
##   heartrate_opt_out = col_logical(),
##   manual = col_logical(),
##   map.id = col_character(),
##   map.summary_polyline = col_character(),
##   name = col_character(),
##   private = col_logical(),
##   start_date = col_datetime(format = &quot;&quot;),
##   start_date_local = col_datetime(format = &quot;&quot;),
##   timezone = col_character(),
##   trainer = col_logical(),
##   type = col_character(),
##   visibility = col_character(),
##   device_watts = col_logical()
##   # ... with 2 more columns
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre class="r"><code>#initial function for tidying Stravadata
tidyfunc &lt;- strav_data %&gt;% 
  select(where(~length(unique(.)) &gt; 1)) %&gt;%
    # selecting unique values
  clean_names() %&gt;% 
  mutate_if(is.numeric, ~round(., 2)) %&gt;% 
    # rounding values to remove clutter for visualization
  mutate(type = as.factor(type)) %&gt;% 
  separate(start_date_local, c(&quot;date&quot;,&quot;time&quot;), sep = &quot; &quot;) %&gt;% 
  select(-start_date) %&gt;% 
    #separating out date &amp; time; excluding multiple dates and times
  filter(elapsed_time &gt; 0,
         max_speed &gt; average_speed)
    # removes activities with no duration (which rules out manually entered activities where no time is supplied) and also incorrect calculations where Strava defines the an average speed that is higher than the max speed (this most often occurs in swimming)</code></pre>
<p>After our data has a first-pass-tidy, we want to sort out which activities occurred frequently enough that they would be useful to display visually. In our view, having 98% of your activities comprise three different types (e.g., hiking, running, and biking), and 2% of your activities comprise 4 types (e.g., stand-up paddle boarding, walking, rock climbing, and jump rope), then your visualization will be skewed. It is certainly possible to select specific activities to visualize, and this will be something you can read more about later. For now, we’re going to pair down our data to activity types that occur most commonly.</p>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    

    
  </body>
</html>

